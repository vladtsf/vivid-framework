(function($,w,d,undefined){var Vivid=$.Vivid={version:"0.0.1"},Helper=Vivid.Helper=new Object;Vivid.Console=function(){return console?{log:console.log?$.proxy(console.log,console):$.noop,assert:console.assert?$.proxy(console.assert,console):$.noop,clear:console.clear?$.proxy(console.clear,console):$.noop,count:console.count?$.proxy(console.count,console):$.noop,dir:console.dir?$.proxy(console.dir,console):$.noop,dirxml:console.dirxml?$.proxy(console.dirxml,console):$.noop,exception:console.exception?$.proxy(console.exception,console):$.noop,group:console.group?$.proxy(console.group,console):$.noop,groupCollapsed:console.groupCollapsed?$.proxy(console.groupCollapsed,console):$.noop,groupEnd:console.groupEnd?$.proxy(console.groupEnd,console):$.noop,profile:console.profile?$.proxy(console.profile,console):$.noop,profileEnd:console.profileEnd?$.proxy(console.profileEnd,console):$.noop,table:console.table?$.proxy(console.table,console):$.noop,time:console.time?$.proxy(console.time,console):$.noop,timeEnd:console.timeEnd?$.proxy(console.timeEnd,console):$.noop,trace:console.trace?$.proxy(console.trace,console):$.noop}:{log:$.noop,assert:$.noop,clear:$.noop,count:$.noop,dir:$.noop,dirxml:$.noop,exception:$.noop,group:$.noop,groupCollapsed:$.noop,groupEnd:$.noop,profile:$.noop,profileEnd:$.noop,table:$.noop,time:$.noop,timeEnd:$.noop,trace:$.noop}}(),Vivid.Collection=function(){var a=function(){if(this instanceof a){var b=new Object;return this.get=function(a){return this.has(a)?b[a]:null},this.set=function(a,c){return c!==undefined&&(b[a]=c),this},this.has=function(a){return b[a]!==null&b[a]!==undefined?!0:!1},this.remove=function(a){return this.has(a)&&delete b[a],this},this.clear=function(){return b=new Object,this},this.count=function(){var a=0;for(var c in b)b.hasOwnProperty(c)&b[c]!=undefined&&a++;return a},this}return new a};return a}(Vivid),Vivid.Cookie=function(){return{get:function(a){return!a||!this.has(a)?null:unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"))},set:function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/.test(a))return;var g="";if(c)switch(typeof c){case"number":g="; max-age="+c;break;case"string":g="; expires="+c;break;case"object":c.hasOwnProperty("toGMTString")&&(g="; expires="+c.toGMTString())}return document.cookie=escape(a)+"="+escape(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":""),this},remove:function(a){if(!a||!this.has(a))return this;var b=new Date;return b.setDate(b.getDate()-1),document.cookie=escape(a)+"=; expires="+b.toGMTString()+"; path=/",this},has:function(a){return(new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)}}}(),Vivid.Template=function(){var variable=/\:([\w])*\:/g,quotes=/:/g,Template=function(markup){if(this instanceof Template){var code="",parse=function(a){if(a=="::")return":";var b=a.replace(quotes,"");return'"+(function(){try{return '+b+';}catch(__e){return "";}})()+"'};return this.compile=function(){return code='"'+markup.replace(/"/g,'\\"').replace(variable,parse)+'"',this},this.eval=function(variables,callback){var result,vars=variables||new Object;if(typeof callback=="function")return setTimeout(function(){with(vars)result=eval(code);callback.call(this,result)},0),this;with(vars)result=eval(code);return result},this}return new Template(markup)};return Template}(),Vivid.Helper.Draggable=function(){var a=function(a){var b=this;return this.mousePushed=!1,this.ePosition=void 0,this.tPosition=void 0,this.mouseDownHandler=function(c){return b.mousePushed=!0,b.ePosition={top:c.pageY,left:c.pageX},b.tPosition=a.offset(),this.$context.trigger("vivid:dragstart"),!1},this.mouseUpHandler=function(a){b.mousePushed=!1,b.ePosition=void 0,b.tPosition=void 0,this.$context.trigger("vivid:dragstop")},this.mouseMoveHandler=function(c){if(b.mousePushed){var d={top:c.pageY-b.ePosition.top,left:c.pageX-b.ePosition.left};b.ePosition.top=c.pageY,b.ePosition.left=c.pageX,b.tPosition={top:b.tPosition.top+d.top,left:b.tPosition.left+d.left},a.offset(b.tPosition)}},this.reset=function(){$(d).off("mousemove",b.mouseMoveHandler).off("mousemove",b.mouseUpHandler),b.mousePushed=!1,b.ePosition=void 0,b.tPosition=void 0,a.css("position","")},a.css("position","absolute"),this};return a}(),Vivid.Control=function(){var a=function(b){if(this instanceof a){var c=$.extend(this,b);return c.parent=a.prototype,c}return new a(b)};return a.prototype={deferInit:function(a,b){return b instanceof $&&b.on(a,$.proxy(this.init,this)),this},genCache:function(){var a=this;return this.elements=new Object,$.each(this.config.selectors,function(b,c){b[0]=="$"&&(a.elements[b]=$(c,a.$context))}),this},parseConfig:function(a,b){return b?this.config=$.extend(!0,a,b):this.config=a,this},init:function(a,b,c){return this.$context=a,this.listen||(this.listen=$.noop),this.parseConfig(c,b),this.config&&this.config.selectors&&this.genCache(),this.listen(),this.locked=!1,this},lock:function(a){return this.locked=!0,typeof a=="function"&&a.apply(this),this},unlock:function(a){return this.locked=!1,typeof a=="function"&&a.apply(this),this},getElement:function(a,b){return a?typeof a=="string"&&this.elements[a]?this.elements[a]:a instanceof NodeList|a instanceof Node?$(a):a instanceof $|b?a:$(a,this.$context):this.$context},on:function(a,b,c,d){var e;if(a){typeof b=="function"?(e=this.$context,c=b,d=c):e=this.getElement(b,!0);if(typeof c!="function")return this;if(d===!1)typeof e=="string"?this.$context.on(a,e,$.proxy(c,this)):e.on(a,$.proxy(c,this));else{var f=$.proxy(function(){return this.locked?!1:c.apply(this,arguments)},this);typeof e=="string"?this.$context.on(a,e,f):e.on(a,f)}}return this},makeDraggable:function(a,b){var c=this.getElement(b),e=new Helper.Draggable(c);this.on("mousedown",a,e.mouseDownHandler).on("mouseup",d,e.mouseUpHandler).on("mousemove",d,e.mouseMoveHandler)}},a}(),$.fn.log=function(){return Vivid.Console.log(this),this},$.fn.dir=function(){return Vivid.Console.dir(this),this}})(jQuery,window,document)