(function($,w,d,undefined){var Vivid=$.Vivid={version:"0.0.1"};Vivid.Console=function(){return console?{log:$.proxy(console.log,console),assert:$.proxy(console.assert,console),clear:$.proxy(console.clear,console),count:$.proxy(console.count,console),dir:$.proxy(console.dir,console),dirxml:$.proxy(console.dirxml,console),exception:$.proxy(console.exception,console),group:$.proxy(console.group,console),groupCollapsed:$.proxy(console.groupCollapsed,console),groupEnd:$.proxy(console.groupEnd,console),profile:$.proxy(console.profile,console),profileEnd:$.proxy(console.profileEnd,console),table:$.proxy(console.table,console),time:$.proxy(console.time,console),timeEnd:$.proxy(console.timeEnd,console),trace:$.proxy(console.trace,console)}:{log:$.noop,assert:$.noop,clear:$.noop,count:$.noop,dir:$.noop,dirxml:$.noop,exception:$.noop,group:$.noop,groupCollapsed:$.noop,groupEnd:$.noop,profile:$.noop,profileEnd:$.noop,table:$.noop,time:$.noop,timeEnd:$.noop,trace:$.noop}}(),Vivid.Collection=function(){var a=new Object,b=function(){return this instanceof b?this:new b};return b.prototype={get:function(b){return this.has(b)?a[b]:null},set:function(b,c){return c!==undefined&&(a[b]=c),this},has:function(b){return a[b]!==null|a[b]!==undefined?!0:!1},remove:function(b){return this.has(b)&&delete a[b],this},clear:function(){return a=new Object,this}},b}(Vivid),Vivid.Cookie=function(){return{get:function(a){return!a||!this.has(a)?null:unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"))},set:function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/.test(a))return;var g="";if(c)switch(typeof c){case"number":g="; max-age="+c;break;case"string":g="; expires="+c;break;case"object":c.hasOwnProperty("toGMTString")&&(g="; expires="+c.toGMTString())}return document.cookie=escape(a)+"="+escape(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":""),this},remove:function(a){if(!a||!this.has(a))return this;var b=new Date;return b.setDate(b.getDate()-1),document.cookie=escape(a)+"=; expires="+b.toGMTString()+"; path=/",this},has:function(a){return(new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)}}}();var Control=function(a){if(this instanceof Control){var b=$.extend(this,a);return b.parent=Control.prototype,b}return new Control(a)};Control.prototype={genCache:function(){var a=this;return this.elements=new Object,$.each(this.config.selectors,function(b,c){b[0]=="$"&&(a.elements[b]=$(c,a.$context))}),this},parseConfig:function(a,b){return b?this.config=$.extend(!0,a,b):this.config=a,this},init:function(a,b,c){return this.$context=a,this.listen||(this.listen=$.noop),this.parseConfig(c,b).genCache().listen(),this.locked=!1,this},lock:function(a){return this.locked=!0,typeof a=="function"&&a.apply(this),this},unlock:function(a){return this.locked=!1,typeof a=="function"&&a.apply(this),this},on:function(a,b,c,d){var e;if(b&&a&&c){b instanceof $?e=b:this.elements[b]?e=this.elements[b]:e=b;if(d===!1)typeof e=="string"?this.$context.on(a,e,$.proxy(c,this)):e.on(a,$.proxy(c,this));else{var f=$.proxy(function(){return this.locked?!1:c.apply(this,arguments)},this);typeof e=="string"?this.$context.on(a,e,f):e.on(a,f)}}return this}},Vivid.Control=Control;var Template=function(markup){if(this instanceof Template){var code="",parse=function(a){var b=a.replace(Template.quotes,"");return'" + ('+b+"!== undefined ? "+b+' : "") + "'};return this.compile=function(){return code='"'+markup.replace(/"/g,'\\"').replace(Template.variable,parse)+'"',this},this.eval=function(variables,callback){var result,vars=variables||new Object;if(typeof callback=="function")return setTimeout(function(){with(vars)result=eval(code);callback.call(this,result)},0),this;with(vars)result=eval(code);return result},this}return new Template(markup)};Template.variable=/\:([\w])*\:/g,Template.quotes=/:/g,Vivid.Template=Template,$.fn.log=function(){return Vivid.Console.log(this),this},$.fn.dir=function(){return Vivid.Console.dir(this),this}})(jQuery,window,document)